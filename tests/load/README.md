# Нагрузочное тестирование с помощью Locust

В этой директории содержатся тесты нагрузки для сервиса сокращения URL с использованием Locust.

## Настройка

1. Установите необходимые зависимости:
```bash
pip install -r requirements.txt
```

## Запуск тестов

1. Убедитесь, что ваше приложение запущено (обычно на http://localhost:8000)

2. Запустите Locust:
```bash
locust -f locustfile.py --host=http://localhost:8000
```

3. Откройте браузер и перейдите по адресу http://localhost:8089 для доступа к веб-интерфейсу Locust

4. Настройте ваш тест:
   - Количество пользователей: Начните с 10-50 пользователей
   - Скорость появления: 1-5 пользователей в секунду
   - Хост: http://localhost:8000 (или URL вашего приложения)

5. Нажмите "Start swarming" для начала теста

## Сценарии тестирования

Нагрузочные тесты включают следующие сценарии:

1. **Создание одиночной ссылки** (вес: 1)
   - Создает отдельные сокращенные ссылки
   - Тестирует базовую функциональность создания ссылок

2. **Массовое создание ссылок** (вес: 2)
   - Создает 5 ссылок подряд
   - Тестирует производительность системы при массовой нагрузке

3. **Чтение и перенаправление** (вес: 3)
   - Создает ссылку и обращается к ней несколько раз
   - Тестирует эффективность кэширования для перенаправлений

4. **Поиск ссылок** (вес: 1)
   - Создает ссылку и ищет её
   - Тестирует функциональность поиска под нагрузкой

## Интерпретация результатов

Веб-интерфейс Locust предоставляет:
- Статистику в реальном времени
- Графики времени отклика
- Частоту ошибок
- Количество запросов в секунду

Ключевые метрики для мониторинга:
- Время отклика (медиана и 95-й процентиль)
- Запросов в секунду (RPS)
- Частота ошибок
- Количество сбоев

## Примечания

- Тесты автоматически обрабатывают регистрацию и аутентификацию пользователей
- Каждый виртуальный пользователь работает независимо
- Тесты включают генерацию случайных данных для URL
- Эффективность кэширования можно оценить, сравнив время первого и последующих обращений 